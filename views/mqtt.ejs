<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<style>
#messages
{
background-color:yellow;
font-size:3;
font-weight:bold;
line-height:140%;
}
#status
{
background-color:red;
font-size:4;
font-weight:bold;
color:white;
line-height:140%;
}


</style>
  <head>
	<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
	<meta http-equiv="Pragma" content="no-cache" />
	<meta http-equiv="Expires" content="0" />
    <title>Websockets Using JavaScript MQTT Client</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel = "stylesheet" type = "text/css"   href = "/stylesheets/myStyle1.css" />
    <link href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round" rel="stylesheet">
	
	<script src="/javascripts/mqttws31.js" type="text/javascript"></script>
	<!-- <script src="/js/angular.js" type="text/javascript"></script> -->
	<script type = "text/javascript"  src = "/javascripts/jquery.min.js"></script>
	<link rel="stylesheet" href="/stylesheets/bootstrap.min.css">
  
    <script type = "text/javascript" src="/javascripts/popper.min.js"></script>
    <script type = "text/javascript" src="/javascripts/angular.min.js"></script>
    <script type = "text/javascript" src="/javascripts/bootstrap.min.js"></script>
  
    

  </head>
  
  <body>
    <script type = "text/javascript" src="/javascripts/cal.js"></script>
    <h1>Websockets MQTT Monitor M</h1>

	<div id="status">Connection Status: Not Connected</div>

	<br>
	<table>
	<tr>

	<td id="connect" width="300" >

	 <form name="connform" action="" onsubmit="return MQTTconnect()">

	<input name="conn" type="submit" value="Connect">
	<input TYPE="button" name="discon " value="DisConnect" onclick="disconnect()">
	</form>
	<form method = "post" action = "logout">
			<button type="submit" class="btn btn-primary btn-lg btn-block" value = "submit" id = "login-button">logout</button>
			</form>
	</td>
	<td id="subscribe" width="300">
	<form name="subs" action="" onsubmit="return sub_topics()">
	Subscribe Topic:   <input type="text" name="Stopic"><br>
	Subscribe QOS:   <input type="text" name="sqos" value="0"><br>
	<input type="submit" value="Subscribe">
	</form> 
	</td>
	<td id="publish" width="300">
	<form name="smessage" action="" onsubmit="return send_message()">

	Message: <input type="text" name="message"><br><br>
	Publish Topic:   <input type="text" name="Ptopic"><br><br>
	Publish QOS:   <input type="text" name="pqos" value="0"><br>
	Retain Message:   <input type="checkbox" name="retain" value="true" ><br>
	<input type="submit" value="Submit">
	</form>
	</td>
	</tr>
	</table>
	Status Messages:
	<div id="status_messages">
	</div>
	Received Messages:

	<div id="out_messages">
	</div>
	<script>
	
	MQTTconnect();
		
//
	var connected_flag=0	
	var mqtt;
	
    var reconnectTimeout = 2000;
	var host= location.hostname;
	console.log('host is '+location.hostname);
	var port=9002;
	var row=0;
	var out_msg="";
	
	var mcount=0;
	</script>
  </body>
</html>
